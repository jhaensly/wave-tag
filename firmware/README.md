README
===================

WaveTag is a small, coin-cell device that allows users to "wave" short
persistence of vision messages at people.  Users can program new messages from a
smartphone over a custom visible light communication (VLC) protocol.

License
=======

This software is made available under the MIT License. See LICENSE.md in the top
level directory for more information.

Dependencies
============

[AVR GNU Toolchain v3.4.3](http://www.atmel.com/tools/atmelavrtoolchainforlinux.aspx)

[AVRDUDE v6.0.1](http://www.nongnu.org/avrdude/)

[Doxygen](http://www.stack.nl/~dimitri/doxygen/)

NOTE: This has only been tested on Linux and OSX. It _should_ work on Windows as
well, though (1) it hasn't been tested and (2) there may be some issues with
path delimiters in the Makefile.

Getting started
===============

Makefile configuration
----------------------

TODO: clean this up.

Optional config.mk to override toolchain path, programmer, etc.

Using Doxygen
-------------

From the firmware directory, execute:

    $ make doc

If Doxygen is installed and on your path, it will automatically generate HTML
and LaTeX documentation in the `./doc` subdirectory.

Brief overview
==============

Organization
------------

TODO

Application modes
-----------------

TODO

Module details
--------------

API documentation is generated by Doxygen. See "Using doxygen" under "Getting
started" for more information.

Implementations are not documented outside the code.

For contributors
================

Coding style
------------

All firmware code should adhere to the [Linux kernel
style](http://www.nongnu.org/avrdude/) with the following
modificulations/additions:

- Indentation should be 4 columns and use spaces, not tabs.

- All conditionals should use curly braces, even those with a single clause,
  unless there is a specific reason to do otherwise.

- All public function declarations should include Doxygen-style comments.

- All functions and structs should be written using camelCase. With functions,
  the first word should be the name of the module. 
  
  e.g. `fooBar(...)`

- All enumerations should be lowercase with words separated by an underscore and
  postfixed with "\_t".

  e.g. `my_enum_t`

- All variables should be lowercase with words separated by an underscore. 

  e.g. `my_var`

- Private/member variables (those decleared static within a source file) should be
  prefixed with "m\_". 
  
  e.g. `m_member_var`

- Public/global variables (those declared extern in a header file) should be prefixed
  with "g\_". 

  e.g. `g_global_var`

- If a file can be `#included` in the header file or source file, it should be
  included in the source file.

- Header files should be organized as follows:
  
  - Header block comment with module description

  - Header guard

  - System includes

  - Project includes

  - Forward declarations

  - Data type definitions

  - Public variable declarations

  - Public function declarations

- Source files should be organized as follows:
  
  - Header block comment

  - System includes

  - Project includes

  - Public variables

  - Private variables

  - Private function declarations

  - Private function definitions (in the same order as declared)

  - Public function definitions (in the same order as declared)

  - ISR definitions

Known issues
------------

TODO
